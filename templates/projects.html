{% extends "base.html" %}

{% block title %}Projects - Covenant Monitor{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/projects.css') }}">
{% endblock %}

{% block content %}
<div class="projects-container">
    <div class="projects-header">
        <h1>Projects</h1>
    </div>

    {% if projects %}
    <div class="projects-list">
        {% for project in projects %}
        <a href="{{ url_for('document_bp.project_detail', project_id=project.id) }}" class="project-item">
            <div class="project-header">
                <h2 class="project-title">{{ project.name }}</h2>
                <span class="project-date">Created {{ project.created_at | datetime }}</span>
            </div>
            
            {% if project.description %}
            <p class="project-description">{{ project.description }}</p>
            {% endif %}
            
            <div class="project-stats">
                <div class="stat-item">
                    <span class="stat-label">Documents</span>
                    <span class="stat-value">{{ project.documents | length }}</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Covenants</span>
                    <span class="stat-value">{{ project.documents | map(attribute='covenants') | map('length') | sum }}</span>
                </div>
            </div>
        </a>
        {% endfor %}
    </div>
    {% else %}
    <div class="empty-state">
        <div class="empty-icon">
            <i class="fas fa-folder-open"></i>
        </div>
        <h3>No Projects Yet</h3>
        <p>Create your first project to start monitoring covenants.</p>
        <button onclick="showNewProjectModal()" class="btn btn-primary">
            <i class="fas fa-plus"></i>
            Create Project
        </button>
    </div>
    {% endif %}
</div>
{% endblock %}
